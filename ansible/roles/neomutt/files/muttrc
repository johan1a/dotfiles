
# Sets imap_pass and smtp_pass
source "gpg --use-agent -dq $HOME/.mutt_pass.gpg |"

set imap_user=johan.peter.andersson@gmail.com

# Maildir
set mbox_type=Maildir

# set virtual_spoolfile=yes
set folder=~/.mail/
source ~/.mutt/mailboxes

# Maildir
set folder=~/.mail/gmail              # the default location of your mailboxes.
set mbox = +/Inbox
set spoolfile=+/Inbox                 # The folder where your (unfiltered) e-mail arrives.
set postponed =+/Utkast
set record=+/S&AOQ-nt
set mbox=+/Archive                    # the folder into which read mail in your `` $spoolfile'' folder will be appended.
set trash = +/Papperskorg
# Any IMAP folders that should be checked regularly for new mail should be listed here:
mailboxes =Inbox ='S&AOQ-nt' ='circle ci' ='Dev mailing lists' =Utkast =Papperskorg

set sidebar_visible = no
set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"
set mail_check_stats

# Store message headers locally to speed things up.
# If hcache is a folder, Mutt will create sub cache folders for each account which may speeds things up even more.
set header_cache = ~/.cache/mutt

# Store messages locally to speed things up, like searching message bodies.
# Can be the same folder as header_cache.
# This will cost important disk usage according to your e-mail amount.
set message_cachedir = "~/.cache/mutt"

# Specify where to save and/or look for postponed messages.
set postponed = +[Gmail]/Drafts

# Allow Mutt to open a new IMAP connection automatically.
unset imap_passive

# Keep the IMAP connection alive by polling intermittently (time in seconds).
set imap_keepalive = 300

# How often to check for new mail (time in seconds).
set mail_check = 120


set record = +Sent
unset record

set sort=threads
set sort_aux=last-date-received

set realname = 'Johan Andersson'
set from = $imap_user
set use_from = yes

#set smtp_url=smtps://$imap_user:$imap_pass@smtp.gmail.com:465/
set smtp_url=smtps://$imap_user@smtp.gmail.com:465/
set ssl_force_tls = yes


# Automatically feed HTML emails through elinks, but only if there is no
# alternative.
auto_view text/html
alternative_order text/plain text/enriched text/html

bind attach <Esc>e noop # Normally <resend-message>.
bind pager j next-line
bind pager k previous-line
bind attach,index,pager \CD next-page
bind attach,index,pager \CU previous-page
bind pager g top
bind pager G bottom
bind attach,index g first-entry
bind attach,index G last-entry
bind index <tab> collapse-thread
bind index,pager <Esc>d noop # Normally <delete-subthread>.
bind index,pager <down> sidebar-next
bind index,pager <right> sidebar-open
bind index,pager <up> sidebar-prev
bind index,pager c mail # Compose.

macro index A "<modify-labels>+archive -unread -inbox -new\\n" "Archive message"
macro index C "<change-vfolder>?" "Change to vfolder overview"
macro index S "<vfolder-from-query>" "Search mailbox"
macro pager \cb <pipe-entry>'urlview'<enter> 'Follow links with urlview'
